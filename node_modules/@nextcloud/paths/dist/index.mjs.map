{"version":3,"file":"index.mjs","sources":["../lib/index.ts"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2019 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\n\n/**\n * URI-Encodes a file path but keep the path slashes.\n *\n * @param path - The path to encode\n */\nexport function encodePath(path: string): string {\n\tif (!path) {\n\t\treturn path\n\t}\n\n\treturn path\n\t\t.split('/')\n\t\t.map(encodeURIComponent)\n\t\t.join('/')\n}\n\n/**\n * Returns the base name of the given path.\n * For example for \"/abc/somefile.txt\" it will return \"somefile.txt\"\n *\n * @param path - The path to get the basename of\n * @param extname - An optional extension to remove from the basename\n */\nexport function basename(path: string, extname?: string): string {\n\tpath = path\n\t\t.replace(/\\\\/g, '/')\n\t\t.replace(/\\/+$/g, '')\n\t\t.replace(/.*\\//, '')\n\tif (extname && extname !== path && path.endsWith(extname)) {\n\t\treturn path.substring(0, path.length - extname.length)\n\t}\n\treturn path\n}\n\n/**\n * Returns the dir name of the given path.\n * For example for \"/abc/somefile.txt\" it will return \"/abc\"\n *\n * @param path - The path to get the directory of\n */\nexport function dirname(path: string): string {\n\tpath = path.replaceAll(/\\\\/g, '/')\n\tconst sections = path.split('/')\n\tif (sections.length <= 1) {\n\t\t// there was no slash in the path\n\t\treturn '.'\n\t}\n\n\tsections.pop()\n\tif (sections.length === 1 && sections[0] === '') {\n\t\treturn '/'\n\t}\n\n\treturn sections.join('/')\n}\n\n/**\n * Get the file extension of the given path\n *\n * @param path - The path to get the extension of\n */\nexport function extname(path: string): string {\n\tconst base = basename(path)\n\tconst index = base.lastIndexOf('.')\n\tif (index > 0) {\n\t\treturn base.substring(index)\n\t}\n\treturn ''\n}\n\n/**\n * Joins multiple path segments into a single path.\n *\n * @param args - The path segments to join\n */\nexport function join(...args: string[]): string {\n\tif (arguments.length < 1) {\n\t\treturn ''\n\t}\n\n\t// discard empty arguments\n\tconst nonEmptyArgs = args.filter((arg) => arg.length > 0)\n\tif (nonEmptyArgs.length < 1) {\n\t\treturn ''\n\t}\n\n\tconst lastArg = nonEmptyArgs[nonEmptyArgs.length - 1]\n\tconst leadingSlash = nonEmptyArgs[0].charAt(0) === '/'\n\tconst trailingSlash = lastArg.charAt(lastArg.length - 1) === '/'\n\tconst sections = nonEmptyArgs.reduce((acc, section) => acc.concat(section.split('/')), [] as string[])\n\n\tlet first = !leadingSlash\n\tconst path = sections.reduce((acc, section) => {\n\t\tif (section === '') {\n\t\t\treturn acc\n\t\t}\n\n\t\tif (first) {\n\t\t\tfirst = false\n\t\t\treturn acc + section\n\t\t}\n\n\t\treturn acc + '/' + section\n\t}, '')\n\n\tif (trailingSlash) {\n\t\t// add it back\n\t\treturn path + '/'\n\t}\n\treturn path\n}\n\n/**\n * Returns whether the given paths are the same, without\n * leading, trailing or doubled slashes and also removing\n * the dot sections.\n *\n * @param path1 - First path to check\n * @param path2 - Second path to check\n */\nexport function isSamePath(path1: string, path2: string): boolean {\n\tconst pathSections1 = (path1 || '').split('/').filter((p) => p !== '.')\n\tconst pathSections2 = (path2 || '').split('/').filter((p) => p !== '.')\n\tpath1 = join(...pathSections1)\n\tpath2 = join(...pathSections2)\n\n\treturn path1 === path2\n}\n"],"names":["extname"],"mappings":"AAUO,SAAS,WAAW,MAAsB;AAChD,MAAI,CAAC,MAAM;AACV,WAAO;AAAA,EACR;AAEA,SAAO,KACL,MAAM,GAAG,EACT,IAAI,kBAAkB,EACtB,KAAK,GAAG;AACX;AASO,SAAS,SAAS,MAAcA,UAA0B;AAChE,SAAO,KACL,QAAQ,OAAO,GAAG,EAClB,QAAQ,SAAS,EAAE,EACnB,QAAQ,QAAQ,EAAE;AACpB,MAAIA,YAAWA,aAAY,QAAQ,KAAK,SAASA,QAAO,GAAG;AAC1D,WAAO,KAAK,UAAU,GAAG,KAAK,SAASA,SAAQ,MAAM;AAAA,EACtD;AACA,SAAO;AACR;AAQO,SAAS,QAAQ,MAAsB;AAC7C,SAAO,KAAK,WAAW,OAAO,GAAG;AACjC,QAAM,WAAW,KAAK,MAAM,GAAG;AAC/B,MAAI,SAAS,UAAU,GAAG;AAEzB,WAAO;AAAA,EACR;AAEA,WAAS,IAAA;AACT,MAAI,SAAS,WAAW,KAAK,SAAS,CAAC,MAAM,IAAI;AAChD,WAAO;AAAA,EACR;AAEA,SAAO,SAAS,KAAK,GAAG;AACzB;AAOO,SAAS,QAAQ,MAAsB;AAC7C,QAAM,OAAO,SAAS,IAAI;AAC1B,QAAM,QAAQ,KAAK,YAAY,GAAG;AAClC,MAAI,QAAQ,GAAG;AACd,WAAO,KAAK,UAAU,KAAK;AAAA,EAC5B;AACA,SAAO;AACR;AAOO,SAAS,QAAQ,MAAwB;AAC/C,MAAI,UAAU,SAAS,GAAG;AACzB,WAAO;AAAA,EACR;AAGA,QAAM,eAAe,KAAK,OAAO,CAAC,QAAQ,IAAI,SAAS,CAAC;AACxD,MAAI,aAAa,SAAS,GAAG;AAC5B,WAAO;AAAA,EACR;AAEA,QAAM,UAAU,aAAa,aAAa,SAAS,CAAC;AACpD,QAAM,eAAe,aAAa,CAAC,EAAE,OAAO,CAAC,MAAM;AACnD,QAAM,gBAAgB,QAAQ,OAAO,QAAQ,SAAS,CAAC,MAAM;AAC7D,QAAM,WAAW,aAAa,OAAO,CAAC,KAAK,YAAY,IAAI,OAAO,QAAQ,MAAM,GAAG,CAAC,GAAG,CAAA,CAAc;AAErG,MAAI,QAAQ,CAAC;AACb,QAAM,OAAO,SAAS,OAAO,CAAC,KAAK,YAAY;AAC9C,QAAI,YAAY,IAAI;AACnB,aAAO;AAAA,IACR;AAEA,QAAI,OAAO;AACV,cAAQ;AACR,aAAO,MAAM;AAAA,IACd;AAEA,WAAO,MAAM,MAAM;AAAA,EACpB,GAAG,EAAE;AAEL,MAAI,eAAe;AAElB,WAAO,OAAO;AAAA,EACf;AACA,SAAO;AACR;AAUO,SAAS,WAAW,OAAe,OAAwB;AACjE,QAAM,iBAAiB,SAAS,IAAI,MAAM,GAAG,EAAE,OAAO,CAAC,MAAM,MAAM,GAAG;AACtE,QAAM,iBAAiB,SAAS,IAAI,MAAM,GAAG,EAAE,OAAO,CAAC,MAAM,MAAM,GAAG;AACtE,UAAQ,KAAK,GAAG,aAAa;AAC7B,UAAQ,KAAK,GAAG,aAAa;AAE7B,SAAO,UAAU;AAClB;"}